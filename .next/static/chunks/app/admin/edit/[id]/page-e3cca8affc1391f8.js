(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{4373:function(e,r,t){Promise.resolve().then(t.bind(t,5645))},9324:function(e,r,t){"use strict";var s=t(7437);t(5677),r.Z=()=>(0,s.jsx)("div",{className:"w-full h-full min-h-screen flex justify-center items-center",children:(0,s.jsx)("div",{className:"spinner"})})},989:function(e,r,t){"use strict";t.d(r,{Ap:function(){return u},I8:function(){return i},db:function(){return l},tO:function(){return d}});var s=t(5236),o=t(9842),n=t(9854),a=t(5186);let c=(0,s.ZF)({apiKey:"AIzaSyAYDVA2nZ5sps5aFNHZneZQ0_-4hzNuyU4",authDomain:"codernext-app-51fc9.firebaseapp.com",projectId:"codernext-app-51fc9",storageBucket:"codernext-app-51fc9.appspot.com",messagingSenderId:"355954847648",appId:"1:355954847648:web:dfe3a53425dea26c22fec5"}),l=(0,o.ad)(c),d=(0,n.cF)(c),i=(0,a.v0)(c),u=new a.hJ},5645:function(e,r,t){"use strict";var s=t(7437),o=t(2265),n=t(5274),a=t(9854),c=t(9842),l=t(989),d=t(7138),i=t(9324),u=t(6463);let m=["Perros","Aves","Gatos","Reptiles","Peces","Otros"];r.default=()=>{let e=(0,u.usePathname)().split("/").pop(),[r,t]=(0,o.useState)({id:e,description:"",stock:"",img:"",price:"",suggested:!1,brand:"",discountRate:"",category:""}),[g,x]=(0,o.useState)(null),[b,f]=(0,o.useState)(!1),p=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!e){console.error("ID del producto no est\xe1 disponible");return}(async()=>{try{let r=(0,c.JU)(l.db,"productos",e),s=await (0,c.QT)(r);s.exists()?(console.table(s.data()),t(s.data())):console.log("No se encontr\xf3 el producto.")}catch(e){console.error("Error al obtener el producto:",e)}})()},[e]);let h=e=>{let{name:r,value:s,type:o,checked:n}=e.target;t(e=>({...e,[r]:"checkbox"===o?n:s}))},y=async s=>{if(s.preventDefault(),!e){console.error("ID del producto no est\xe1 disponible");return}try{f(!0);let s=r.img;if(g){let r=(0,a.iH)(l.tO,"images/".concat(e.toString())),t=await (0,a.KV)(r,g);s=await (0,a.Jt)(t.ref)}let o=(0,c.JU)(l.db,"productos",e);await (0,c.r7)(o,{...r,img:s}),console.log("Producto actualizado!"),t({id:e,description:"",stock:"",img:"",price:"",suggested:!1,brand:"",discountRate:"",category:""}),x(null),p.current&&(p.current.value="")}catch(e){console.error("Error al actualizar el producto:",e),alert("Error al guardar el producto. Verifica los datos e intenta de nuevo.")}finally{f(!1)}};return(0,s.jsx)(s.Fragment,{children:b?(0,s.jsx)(i.Z,{}):(0,s.jsxs)("form",{onSubmit:y,className:"p-4 mt-10 max-w-sm mx-auto bg-white rounded-lg shadow-lg border border-gray-300",children:[(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("h2",{className:"flex justify-center",children:"Editando el producto nro ".concat(e)})}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-xs font-medium text-gray-700",children:"Descripci\xf3n:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"text",id:"description",name:"description",value:r.description,onChange:h})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"stock",className:"block text-xs font-medium text-gray-700",children:"Stock:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"number",id:"stock",name:"stock",value:r.stock,onChange:h})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"img",className:"block text-xs font-medium text-gray-700",children:"Imagen:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"file",id:"img",name:"img",ref:p,onChange:e=>{x(e.target.files[0])}})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"price",className:"block text-xs font-medium text-gray-700",children:"Precio:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"number",id:"price",name:"price",value:r.price,onChange:h})]}),(0,s.jsxs)("div",{className:"mb-3 flex items-center",children:[(0,s.jsx)("input",{className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",type:"checkbox",id:"suggested",name:"suggested",checked:r.suggested,onChange:h}),(0,s.jsx)("label",{htmlFor:"suggested",className:"ml-2 block text-xs font-medium text-gray-700",children:"\xbfProducto Sugerido?"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"brand",className:"block text-xs font-medium text-gray-700",children:"Marca:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"text",id:"brand",name:"brand",value:r.brand,onChange:h})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"discountRate",className:"block text-xs font-medium text-gray-700",children:"Porcentaje de descuento:"}),(0,s.jsx)("input",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",type:"number",id:"discountRate",name:"discountRate",value:r.discountRate,onChange:h})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-xs font-medium text-gray-700",children:"Categor\xeda:"}),(0,s.jsx)("select",{className:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-xs",id:"category",name:"category",value:r.category,onChange:h,children:m.map(e=>(0,s.jsx)("option",{value:e.toLowerCase(),children:e},e))})]}),(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)(d.default,{href:"/admin/",className:"bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2 py-2 px-4 border rounded",children:"Volver"}),(0,s.jsx)(n.Z,{type:"submit",className:"px-3 py-1 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Guardar"})]})]})})}},5274:function(e,r,t){"use strict";var s=t(7437);r.Z=e=>{let{children:r,className:t="",...o}=e;return(0,s.jsx)("button",{className:"rounded-x1 py-2 px-4 bg-blue-600 hover:bg-blue-500 text-white text-center ".concat(t),...o,children:r})}},6463:function(e,r,t){"use strict";var s=t(1169);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},5677:function(){}},function(e){e.O(0,[457,358,691,138,840,971,23,744],function(){return e(e.s=4373)}),_N_E=e.O()}]);